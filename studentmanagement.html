<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
    <nav class="navbar">
        <a href="/" class="logo">Admin Panel</a>
        <ul>
            <li><a href="admin.html" class="active">Dashboard</a></li>
            <li><a href="settings.html">Settings</a></li>
            <li><a href="logout.php">Logout</a></li>
        </ul>
    </nav>

    <div class="admin-content">
        <h1>Student Registrations</h1>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>First Name</th>
                    <th>Middle Name</th>
                    <th>Last Name</th>
                    <th>Date of Birth</th>
                    <th>Gender</th>
                    <th>Course</th>
                    <th>Father's Name</th>
                    <th>Mother's Name</th>
                    <th>Aadhar Number</th>
                    <th>Photograph</th>
                </tr>
            </thead>
            <tbody>
                <?php
                include 'db_connect.php'; // Include the database connection script

                // Query to fetch student data
                $sql = "SELECT * FROM students";
                $result = $conn->query($sql);

                // Check if there are results
                if ($result->num_rows > 0) {
                    // Output data of each row
                    while ($row = $result->fetch_assoc()) {
                        echo "<tr>";
                        echo "<td>" . htmlspecialchars($row['id']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['first_name']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['middle_name']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['last_name']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['dob']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['gender']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['course_enrolled']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['father_name']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['mother_name']) . "</td>";
                        echo "<td>" . htmlspecialchars($row['aadhar_number']) . "</td>";

                        // Check if photograph data exists and is not empty
                        if (!empty($row['photograph'])) {
                            echo "<td><img src='data:image/jpeg;base64," . base64_encode($row['photograph']) . "' alt='photo' width='100'></td>";
                        } else {
                            echo "<td>No Photo</td>";
                        }
                        echo "</tr>";
                    }
                } else {
                    echo "<tr><td colspan='11'>No records found</td></tr>";
                }

                $conn->close();
                ?>
            </tbody>
        </table>
    </div>
</body>
</html>
